function CenterRelation(a,b,c,d,e,f,g,h,i){this.centerTEXT=a,this.doc=document.getElementById(b),this.list=c.concat(),this.smallR=f,this.animation=g,this.animateTime=h,this.width=d,this.height=e,this.hrefBase=i,this.centerX=d/2,this.centerY=e/2,this.paper=Raphael(b,d,e),this._isParamValid()&&this._isListValid()||(this.doc.innerHTML=this.wrongInfo),this.paint()}CenterRelation.prototype.paint=function(){var a=this,b=a._insertRect(0,0,a.centerTEXT)[0];b.glow({color:a._getStyle(b.node,"fill"),opacity:1}),a.list.forEach(function(a,b){a.num=(this.biggest-a.num)*this.unit+this.smallR;var c,d;c=!this.widthLonger&&a.num>this.centerX-30?this.centerX-30:a.num,d=this.widthLonger&&a.num>this.centerY-10?Math.sqrt(Math.pow(a.num,2)-Math.pow(this.centerY-10,2)):0;do a.xd=(Math.random()*(c-d)+d)*(Math.random()<.5?-1:1),a.yd=Math.sqrt(Math.pow(a.num,2)-Math.pow(a.xd,2))*(Math.random()<.5?-1:1),console.log(1);while(this._overlap(a.xd,a.yd,b));this._insertRect(a.xd,a.yd,a.name)},a)},CenterRelation.prototype._ramdomColor=function(){return"CR-"+String.fromCharCode(Math.floor(8*Math.random())+97)},CenterRelation.prototype._getStyle=function(a,b){return window.getComputedStyle?window.getComputedStyle(a)[b]:a.currentStyle?a.currentStyle[b]:null},CenterRelation.prototype._overlap=function(a,b,c){var j,e=a+90,f=a-90,g=b+20,h=b-20,i=!1;if(90>a&&a>-90&&20>b&&b>-20)return!0;for(j=0;c>j;j++)if(this.list[j].xd<e&&this.list[j].xd>f&&this.list[j].yd<g&&this.list[j].yd>h){i=!0;break}return i},CenterRelation.prototype._addActive=function(){for(var a=0;a<arguments.length;a++)arguments[a].setAttribute("class",arguments[a].getAttribute("class")+" active"),console.log(arguments[a].getAttribute("class"))},CenterRelation.prototype._removeActive=function(){for(var a=0;a<arguments.length;a++)arguments[a].setAttribute("class",arguments[a].getAttribute("class").slice(0,-7))},CenterRelation.prototype._insertRect=function(a,b,c){var d,f,h,i,j,g=this,e=g.paper.text(g.centerX,g.centerY,c).attr("cursor","pointer");return e.node.setAttribute("class","CR-text"),console.log(e.node.getAttribute("class")),h=e.getBBox().width+20,i=e.getBBox().height+10,d=this.paper.rect(this.centerX-h/2,this.centerY-i/2,h,i,15),d.node.setAttribute("class",g._ramdomColor()),j=this.paper.set(),j.push(d,e),g.hrefBase&&(e.attr("href",g.hrefBase+c),j.click(function(){window.open(e.attr("href"))})),e.toFront(),f=g.paper.path("M"+g.centerX+","+g.centerY).attr("stroke","#888").toBack().animate({path:"M"+g.centerX+","+g.centerY+"L"+(g.centerX+a)+","+(g.centerY+b)},g.animateTime,g.animation),f.node.setAttribute("class","CR-path"),all=this.paper.set().push(d,e,f),all.hover(function(){j.transform("S1.2").toFront(),g._addActive(d.node),f.attr({stroke:g._getStyle(d.node,"fill"),"stroke-width":"3"})},function(){j.transform("S1"),g._removeActive(d.node),f.attr({stroke:"#888","stroke-width":"1"})}),j.forEach(function(c){c.animate({x:c.attr("x")+a,y:c.attr("y")+b},g.animateTime,g.animation)}),j},CenterRelation.prototype._isListValid=function(){var d,e,a=1/0,b=-1/0,c=this.list.every(function(c){return"number"!=typeof c.num&&"string"!=typeof c.name?!1:(c.num>b&&(b=c.num),c.num<a&&(a=c.num),!0)});return c?(d=this.bigR-this.smallR,e=b-a,this.unit=d/e,this.biggest=b,!0):(this.wrongInfo="Invalid list",!1)},CenterRelation.prototype._isParamValid=function(){var b,a=this;return"string"!=typeof a.centerTEXT?(a.wrongInfo="centerTEXT must be a string",!1):null===a.doc?(a.wrongInfo="There has no elements ID is "+a.docID,!1):"number"!=typeof a.width||a.width<=0?(a.wrongInfo="Invalid width",!1):"number"!=typeof a.height||a.height<=0?(a.wrongInfo="Invalid height",!1):"number"!=typeof a.smallR||a.smallR<0||a.smallR>=a.width||a.smallR>=a.height?(a.wrongInfo="smallR must be a number and vailid",!1):(b="linear,easeIn,easeOut,easeInOut,backIn,elastic,bounce","string"!=typeof a.animation||-1===b.indexOf(a.animation)?(a.wrongInfo="animation must be in ['linear', 'easeIn', 'easeOut', 'backIn', 'elastic', 'bounce']",!1):"number"!=typeof a.animateTime||a.animateTime<0?(a.wrongInfo="Invalid animateTime",!1):null!==a.hrefBase&&"string"!=typeof a.hrefBase?(a.wrongInfo="Invalid hrefBase",!1):(a.widthLonger=a.width-60>a.height-20?!0:!1,a.longSide=a.widthLonger?a.width-60:a.height-20,a.bigR=a.longSide/2,!0))};